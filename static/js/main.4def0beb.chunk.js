(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{332:function(e,t,a){e.exports=a(565)},339:function(e,t,a){},340:function(e,t,a){},565:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(295),c=a.n(o),l=(a(339),a(340),a(317)),i=a(623),s=a(621),m=a(619),u=a(629);var d=function(e){let{onLogin:t,onNavigateRegister:a}=e;const[o,c]=Object(n.useState)(""),[l,i]=Object(n.useState)("");return r.a.createElement(u.a,{mt:5},r.a.createElement("img",{src:"".concat("/PSPC","/images/title.jpg"),alt:"Title",style:{maxWidth:"100%",height:"auto"}}),r.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("".concat("http://localhost:8000","/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:o,password:l})});if(e.ok){const a=await e.json();console.log(a.message),t()}else console.error("Login failed")}catch(a){console.error("Error:",a)}}},r.a.createElement(m.a,{label:"Username",variant:"outlined",value:o,onChange:e=>c(e.target.value),fullWidth:!0,margin:"normal"}),r.a.createElement(m.a,{label:"Password",type:"password",variant:"outlined",value:l,onChange:e=>i(e.target.value),fullWidth:!0,margin:"normal"}),r.a.createElement(s.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0},"Login")),r.a.createElement(s.a,{variant:"text",color:"primary",onClick:a,sx:{mt:2}},"Don't have an account? Register"))},g=a(630);var h=function(e){let{onStop:t}=e;const[a,o]=Object(n.useState)(0),[c,l]=Object(n.useState)(!1),i=Object(n.useRef)(null),m=Object(n.useRef)(null);Object(n.useEffect)(()=>(i.current=setInterval(()=>{o(e=>(e%60===0&&d(),e+1))},1e3),()=>{clearInterval(i.current),m.current&&clearTimeout(m.current)}),[]);const d=async()=>{try{const t=await fetch("http://localhost:8000/update-study",{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Network response was not ok");const a=await t.json();console.log(a.result),"correct"!==a.result&&h()}catch(e){console.error("Error during fetch:",e)}},h=()=>{l(!0),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{l(!1)},1e4)};return r.a.createElement(u.a,{mt:5,textAlign:"center"},r.a.createElement(g.a,{variant:"h4",gutterBottom:!0},(E=a,[Math.floor(E/3600),Math.floor(E%3600/60),E%60].map(e=>String(e).padStart(2,"0")).join(":"))),r.a.createElement(s.a,{onClick:()=>{clearInterval(i.current),t(a)},variant:"contained",color:"primary"},"Stop"),c&&r.a.createElement(u.a,{mt:2,style:{color:"red"}},r.a.createElement(g.a,null,"Warning: Please correct your posture!")));var E},E=a(627),p=a(626),f=a(620),y=a(311),b=a(137),v=a(103),S=a(622);var w=function(e){let{studyData:t}=e;const[a,o]=Object(n.useState)(!1),[c,l]=Object(n.useState)({}),i=["#0088FE","#FF8042"];return r.a.createElement(u.a,{mt:2},r.a.createElement(E.a,{container:!0,spacing:2},t.map((e,t)=>{const a=[{name:"Correct Posture",value:e.correctPostureTime},{name:"Incorrect Posture",value:e.incorrectPostureTime}];return r.a.createElement(E.a,{item:!0,xs:12,sm:4,key:t,onClick:()=>(e=>{l(e),o(!0)})(e)},r.a.createElement(p.a,{elevation:3,sx:{padding:2,cursor:"pointer",textAlign:"center"}},r.a.createElement(g.a,{variant:"subtitle1"},e.date),r.a.createElement(f.a,{width:200,height:200},r.a.createElement(y.a,{data:a,cx:"35%",cy:"50%",outerRadius:60,dataKey:"value"},a.map((e,t)=>r.a.createElement(b.a,{key:"cell-".concat(t),fill:i[t%i.length]}))),r.a.createElement(v.a,null))))})),r.a.createElement(S.a,{open:a,onClose:()=>o(!1),"aria-labelledby":"study-details","aria-describedby":"study-details-description"},r.a.createElement(u.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4,maxWidth:500}},r.a.createElement(g.a,{id:"study-details",variant:"h6",component:"h2"},"Study Details - ",c.date),r.a.createElement("img",{src:"".concat("/PSPC","/images/cat1.png"),alt:"Cat",style:{maxWidth:"100%",height:"auto",marginTop:"20px"}}),r.a.createElement(g.a,{id:"study-details-description",sx:{mt:2}},"Correct Posture Time: ",c.correctPostureTime," minutes"),r.a.createElement(g.a,{id:"study-details-description"},"Incorrect Posture Time: ",c.incorrectPostureTime," minutes"))))};var j=function(e){let{onSetIOT:t}=e;return r.a.createElement(s.a,{onClick:t,variant:"contained",color:"primary",sx:{mt:2}},"Set IOT Preferences")};var O=function(e){let{onRegister:t,onNavigateLogin:a}=e;const[o,c]=Object(n.useState)(""),[l,i]=Object(n.useState)(""),[d,g]=Object(n.useState)("");return r.a.createElement(u.a,{mt:5},r.a.createElement("img",{src:"".concat("/PSPC","/images/title.jpg"),alt:"Title",style:{maxWidth:"100%",height:"auto"}}),r.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("".concat("http://localhost:8000","/register/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:o,password:l,email:d})}),n=await e.json();e.ok?(console.log("Registration successful:",n.message),t(o,d,l)):console.error("Registration error:",n.detail)}catch(a){console.error("Network error:",a)}}},r.a.createElement(m.a,{label:"Username",variant:"outlined",value:o,onChange:e=>c(e.target.value),fullWidth:!0,margin:"normal"}),r.a.createElement(m.a,{label:"Email",variant:"outlined",value:d,onChange:e=>g(e.target.value),fullWidth:!0,margin:"normal"}),r.a.createElement(m.a,{label:"Password",type:"password",variant:"outlined",value:l,onChange:e=>i(e.target.value),fullWidth:!0,margin:"normal"}),r.a.createElement(s.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0},"Register"),r.a.createElement(s.a,{variant:"text",color:"primary",onClick:a,sx:{mt:2}},"Already have an account? Login")))},x=a(618),T=a(625),k=a(631),C=a(632),P=a(634),W=a(633),R=a(314),I=a.n(R),N=a(315),D=a.n(N),L=a(316),F=a.n(L);const A=Object(l.a)({palette:{primary:{main:"#ff7f50"},background:{default:"#fff"}}});var M=function(){const[e,t]=Object(n.useState)(!1),[a,o]=Object(n.useState)(!1),[c,l]=Object(n.useState)([]),[m,E]=Object(n.useState)(""),p=async()=>{try{const t=await fetch("".concat("http://localhost:8000","/advise"));if(!t.ok)throw new Error("Network response was not ok");let a=await t.text();a.startsWith('"')&&a.endsWith('"')&&(a=a.substring(1,a.length-1)),E(a)}catch(e){console.error("Error fetching Advise:",e)}},f=async()=>{try{const t=await fetch("".concat("http://localhost:8000","/study-data"));if(!t.ok)throw new Error("Network response was not ok");const a=await t.json();l(a)}catch(e){console.error("Error fetching study data:",e)}};Object(n.useEffect)(()=>{f(),p(),(async()=>{try{const t=await fetch("".concat("http://localhost:8000","/env"));if(!t.ok)throw new Error("Network response was not ok");const a=await t.json();b({humidity:a.humidity,temperature:a.temperature,brightness:a.brightness})}catch(e){console.error("Error fetching environment data:",e)}})()},[]);const[y,b]=Object(n.useState)({humidity:null,temperature:null,brightness:null}),[v,S]=Object(n.useState)(22),[R,N]=Object(n.useState)(45),[L,M]=Object(n.useState)(24),[J,B]=Object(n.useState)(50),[U,K]=Object(n.useState)(!1);return r.a.createElement(i.a,{theme:A},r.a.createElement(x.a,null),r.a.createElement(u.a,{display:"flex"},r.a.createElement(T.a,{maxWidth:"sm"},e||U?U?r.a.createElement(O,{onRegister:(e,t,a)=>{console.log(e,t,a)},onNavigateLogin:()=>K(!1)}):a?r.a.createElement(h,{onStop:async e=>{o(!1),console.log("Studied Time:",e),await f(),await p()}}):r.a.createElement(u.a,{textAlign:"center",mt:5},r.a.createElement(g.a,{variant:"h4",sx:{mb:2}},(()=>{const e=new Date,t=new Date(e.getTime()+324e5).toISOString().split("T")[0],a=c.find(e=>e.date===t);return(e=>[Math.floor(e/3600),Math.floor(e%3600/60),e%60].map(e=>String(e).padStart(2,"0")).join(":"))(60*(a?a.correctPostureTime+a.incorrectPostureTime:0))})()),r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:()=>o(!0),sx:{mb:2}},"Start Study"),m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{textAlign:"center",mt:5},r.a.createElement("img",{src:"".concat("/PSPC","/images/doctor.png"),alt:"Advice",style:{maxWidth:"50%",height:"auto"}})),r.a.createElement(g.a,null,m)),r.a.createElement(w,{studyData:c}),r.a.createElement(k.a,{sx:{mt:2,mx:"auto"}},r.a.createElement(C.a,null,r.a.createElement(W.a,null,r.a.createElement(P.a,{align:"center"},r.a.createElement(I.a,null)),r.a.createElement(P.a,{align:"center"},y.temperature?"".concat(y.temperature,"\xb0C"):"--"),r.a.createElement(P.a,{align:"center"},L,"\xb0C")),r.a.createElement(W.a,null,r.a.createElement(P.a,{align:"center"},r.a.createElement(D.a,null)),r.a.createElement(P.a,{align:"center"},y.humidity?"".concat(y.humidity,"%"):"--"),r.a.createElement(P.a,{align:"center"},J,"%")),r.a.createElement(W.a,null,r.a.createElement(P.a,{align:"center"},r.a.createElement(F.a,null)),r.a.createElement(P.a,{align:"center"},y.brightness?"".concat(y.brightness):"--"),r.a.createElement(P.a,{align:"center"},"--")))),r.a.createElement(j,{onSetIOT:()=>{}})):r.a.createElement(d,{onLogin:()=>t(!0),onNavigateRegister:()=>K(!0)}))))};var J=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,635)).then(t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:o,getTTFB:c}=t;a(e),n(e),r(e),o(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null))),J()}},[[332,1,2]]]);
//# sourceMappingURL=main.4def0beb.chunk.js.map